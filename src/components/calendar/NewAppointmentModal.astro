<div
  data-role="appointment-modal"
  class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-950/80 backdrop-blur"
  aria-hidden="true"
>
  <div class="fixed inset-0" data-action="close-modal" aria-hidden="true"></div>
  <div
    role="dialog"
    aria-modal="true"
    aria-labelledby="appointment-modal-title"
    class="relative z-10 w-full max-w-lg rounded-3xl border border-white/10 bg-slate-950/80 p-8 text-sm text-white shadow-xl shadow-primary/10"
  >
    <div class="flex items-start justify-between gap-4">
      <div>
        <h2 id="appointment-modal-title" class="text-xl font-semibold text-white">
          Nuevo turno
        </h2>
        <p class="mt-1 text-xs text-slate-400">
          Completa los datos para agendar un nuevo turno.
        </p>
      </div>
      <button
        type="button"
        class="text-slate-400 transition hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent"
        data-action="close-modal"
        aria-label="Cerrar modal"
      >
        âœ•
      </button>
    </div>

    <p
      data-role="modal-feedback"
      class="mt-4 hidden rounded-2xl bg-white/10 px-4 py-2 text-xs text-slate-200"
    ></p>

    <form data-role="modal-form" class="mt-6 space-y-4">
      <div>
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-400" for="modal-patient-search">
          Paciente
        </label>
        <div class="mt-1 space-y-2">
          <input
            type="search"
            id="modal-patient-search"
            data-role="modal-patient-search"
            placeholder="Buscar o ingresar paciente"
            class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/40"
            autocomplete="off"
          />
          <input type="hidden" data-role="modal-patient-id" name="patientId" />
          <ul
            data-role="modal-patient-results"
            class="hidden max-h-40 overflow-y-auto rounded-2xl border border-white/10 bg-slate-950/90 text-sm text-slate-200"
            role="listbox"
          ></ul>
        </div>
      </div>

      <input type="hidden" data-role="modal-dentist-id" name="dentistId" />

      <div class="grid gap-4 sm:grid-cols-2">
        <div>
          <label class="text-xs font-semibold uppercase tracking-wide text-slate-400" for="modal-start">
            Inicio
          </label>
          <input
            type="datetime-local"
            id="modal-start"
            name="startsAt"
            required
            class="mt-1 w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/40"
          />
        </div>
        <div>
          <label class="text-xs font-semibold uppercase tracking-wide text-slate-400" for="modal-end">
            Fin
          </label>
          <input
            type="datetime-local"
            id="modal-end"
            name="endsAt"
            required
            class="mt-1 w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/40"
          />
        </div>
      </div>

      <div>
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-400" for="modal-treatment">
          Tratamiento
        </label>
        <input
          type="text"
          id="modal-treatment"
          name="treatment"
          maxlength="200"
          class="mt-1 w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/40"
        />
      </div>

      <div>
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-400" for="modal-notes">
          Notas
        </label>
        <textarea
          id="modal-notes"
          name="notes"
          rows="4"
          class="mt-1 w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/40"
        ></textarea>
      </div>

      <div class="flex items-center justify-end gap-2 pt-2">
        <button
          type="button"
          data-action="close-modal"
          class="rounded-full border border-white/10 bg-white/5 px-4 py-2 text-sm font-semibold text-slate-200 transition hover:bg-white/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent"
        >
          Cancelar
        </button>
        <button
          type="submit"
          class="rounded-full border border-accent/50 bg-accent px-4 py-2 text-sm font-semibold uppercase tracking-wide text-white transition hover:brightness-95 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent"
        >
          Guardar turno
        </button>
      </div>
    </form>
  </div>
</div>
